


#include <stdio.h>
#include <windows.h>
#include <stdlib.h>
#include <unistd.h>
#include <conio.h>
//definiciones
#define arriba 119
#define abajo 115
#define izquierda 97
#define derecha 100
#define quitar 113
// inicio del programa 
#define inicioX 5
#define inicioY 5
// sistema de movimiento "para evitar el parpadeo y lentitud en el movimiento"
void movimiento(int x,int y,int obj){
	HANDLE pantalla;
	COORD posi;
	posi.X=x;
	posi.Y=y;
	pantalla=GetStdHandle(STD_OUTPUT_HANDLE);
	SetConsoleCursorPosition(pantalla,posi);
	printf("%c",obj);

}
// mapa completo de la ciudad 
int map[25][30] ={
				{201,205,205,205,205,205,205,205,205,205,205,205,205, 65,176, 65,205,205,205,205,205,205,205,205,205,205,205,205,187},
				{186, 44, 44, 44, 44, 44, 44, 44, 44, 65, 65, 65, 65, 65,176, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65,186},
				{186, 44, 44, 44, 44, 44, 44, 44, 44, 44, 65,178, 65, 44,176, 44, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65,186},
				{186, 44,194,194,194, 44,194,194,194, 44, 44,178, 44, 44,176, 44, 65, 65, 65, 44,194,194,194, 44, 65, 65,178, 44,186},
				{186, 44,194,194,194, 44,194,194,194, 44, 44,178, 44, 44,176, 44, 65, 65, 65, 44,194,194,194, 44, 44, 65,178, 44,186},
				{186, 44,219,197,219, 44,219,197,219,176,176,176,176,176,176, 44, 44, 44, 44, 44,219,197,219, 44, 44, 44,178, 44,186},
				{186, 44, 44,176, 44, 44, 44,176, 44,176, 44,178, 44, 44,176, 44, 44, 44, 44, 44, 44,176, 44, 44, 44, 44,178, 44,186},
				{186, 44, 44,176,176,176,176,176,176,176, 44,178, 44, 44,176, 44, 44, 44, 44, 44, 44,176, 44, 44, 44, 44,178, 44,186},
				{186, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44,178,178,178,176,178,178,178,178,178,178,176,178,178,178,178,178, 44,186},
				{186, 44,194,194,194,194, 44,194,194,194,194, 44, 44, 44,176, 44, 44, 44, 44, 44, 44,176, 44,194,194,194,178, 44,186},
				{186, 44,194,194,194,194, 44,194,194,194,194, 44, 44, 65,176, 65, 44, 44, 44, 44, 44,176, 44,194,194,194,178, 44,186},
				{186, 44,219,219,197,219, 44,219,219,197,219, 44,176,176,176,176,176, 44, 44, 44, 44,176, 44,219,197,219,178, 44, 65},
				{186, 44, 44, 44,176, 44, 44, 44, 44,176, 44, 65,176,176,176,176,176, 65, 44, 44, 44,176, 44, 44,176, 44,178, 44, 65},
				{186, 65, 44, 44,176,176,176,176,176,176,176,176,176,176, 35,176,176,176,176,176,176,176,176,176,176,176,176, 44, 44},
				{186, 65,207, 44, 44, 44, 44, 44, 44, 44, 44, 65,176,176,176,176,176, 65, 44, 44, 44, 44, 44, 44, 44, 44,178, 44, 65},
				{186, 65, 65, 65, 44, 44, 44, 44, 44, 44, 44, 44,176,176,176,176,176, 44, 44,178,178,178,178,178,178,178,178, 44, 65},
				{200,205,205,205,205,205,187,194,194,194,194,194, 44, 65,176, 65, 44, 44, 44,178, 44,201,205,205,205,205,205,205,188},
				{ 44, 44, 44, 44, 44, 44,186,194,194,194,194,194, 44, 44,176, 44, 44, 44, 44,178, 44,186, 44, 44, 44, 44, 44, 44, 44},
				{ 44, 44, 44, 44, 44, 44,186,219,219,219,219,219, 44, 44,176, 44, 44, 44, 44,178, 44,186, 44, 44, 44, 44, 44, 44, 44},
				{ 44, 44, 44, 44, 44, 44,186,219,219,197,219,219, 44, 44,176, 44, 44, 44, 44,178, 44,186, 44, 44, 44, 44, 44, 44, 44},
				{ 44, 44, 44, 44, 44, 44,186, 44, 44,176, 44, 44, 44, 44,176, 44, 44, 44, 44,178, 44,186, 44, 44, 44, 44, 44, 44, 44},
				{ 44, 44, 44, 44, 44, 44,186, 44, 44,176,176,176,176,176,176, 44, 44, 44, 65,178, 65,186, 44, 44, 44, 44, 44, 44, 44},
				{ 44, 44, 44, 44, 44, 44,186, 44, 44, 44, 44, 44, 44, 65,176, 65, 44, 44, 65, 65, 65,186, 44, 44, 44, 44, 44, 44, 44},
				{ 44, 44, 44, 44, 44, 44,200,205,205,205,205,205, 65, 65,176, 65, 65,205,205,205,205,188, 44, 44, 44, 44, 44, 44, 44},};



//--------------- player ---------------------
void player(){
	int X=23,Y=14,n,m,antes=0,despues=0;
	char entrada;	
	while(1){
		entrada=getch();
		antes=map[X][Y];

		if (entrada==arriba){
			
			if(map[X-1][Y]==176 || map[X-1][Y]==44|| map[X-1][Y]==197){
				map[X][Y]=antes;
				movimiento(Y,X,antes);
				X--;
	
				antes=map[X][Y];
				movimiento(Y,X,64);
				
				
			}
		
		}else if(entrada==abajo){

			if(map[X+1][Y]==176 || map[X+1][Y]==44|| map[X+1][Y]==197){
				map[X][Y]=antes;
				movimiento(Y,X,antes);
				X++;
				antes=map[X][Y];
				movimiento(Y,X,64);

			}
		}else if(entrada==derecha){ 
			
			if(map[X][Y+1]==176 || map[X][Y+1]==44|| map[X][Y+1]==197){
				map[X][Y]=antes;
				movimiento(Y,X,antes);
				Y++;	
				antes=map[X][Y];
				movimiento(Y,X,64);
			}
		}else if(entrada==izquierda){
			
			if(map[X][Y-1]==176 || map[X][Y-1]==44|| map[X][Y-1]==197){
				map[X][Y]=antes;
				movimiento(Y,X,antes);
				Y--;
				antes=map[X][Y];
				movimiento(Y,X,64);
			}
			     

		}else if(entrada==quitar){
			break;
		}
		//printf("X:%i\n",X );
		//printf("Y:%i\n",Y );


	}
}
int main(){
// mapa-----------------------------r
	int i,j;
	system("cls");
   for(i=0; i<=24; i++)
   {
     for(j=0; j<=29; j++)
       {
                  printf("%c", map[i][j] ); 
       }
       printf("\n");
     }
    printf("Mapa test N1 pueblo de final fantasy 1 Coneria \n usa wasd para moverte y Q para salir  \n la @<-- eres tu ");
     player();
	
	return 0;
}